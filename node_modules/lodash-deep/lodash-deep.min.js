!function(e,n){"function"==typeof define&&define.amd?define(["lodash"],n):"object"==typeof exports?module.exports=n(require("lodash").runInContext()):e._.mixin(n(e._))}(this,function(e,n){"use strict";function r(n){if(e.isArray(n))return n;if(!e.isString(n))return[];for(var r=0,t="",u=n.length,a=[],i="",p=null,c=!1,o=!1,f=!1;u>r;r++)if(t=n[r],o="\\"===t||"["===t||"]"===t||"."===t,!o||c)i+=t,c=!1;else{if(f&&"]"!==t){p='unexpected "'+t+'" within brackets';break}switch(t){case"\\":c=!0;break;case"]":f=!1;break;case"[":f=!0;case".":a.push(i),i=""}}if(p)throw new SyntaxError(p+" at character "+r+" in property path "+n);return""===a[0]&&a.splice(0,1),a.push(i),a}var t={deepIn:function(n,t){for(var u=r(t),a=0;a<u.length;a++){var i=u[a];if(!(e.has(n,i)||e.isObject(n)&&i in n))return!1;n=n[i]}return!0},deepHas:function(n,t){for(var u=r(t),a=0;a<u.length;a++){var i=u[a];if(!e.has(n,i))return!1;n=n[i]}return!0},deepGet:function(t,u){var a=r(u);return e.deepIn(t,a)?e.reduce(a,function(e,n){return e[n]},t):n},deepOwn:function(t,u){var a=r(u);return e.deepHas(t,a)?e.reduce(a,function(e,n){return e[n]},t):n},deepSet:function(n,t,u){var a=r(t),i=n;return e.forEach(a,function(n,r){r+1===a.length?i[n]=u:e.isObject(i[n])||(i[n]=a[r+1]%1===0?[]:{}),i=i[n]}),n},deepPluck:function(n,r){return e.map(n,function(n){return e.deepGetValue(n,r)})},deepCall:function(n,r,t){var u=Array.prototype.slice.call(arguments,3);return e.deepApply(n,r,t,u)},deepApply:function(r,t,u,a){var i=e.deepGet(r,t);return e.isFunction(i)?i.apply(u,a):n},deepEscapePropertyName:function(e){return e.replace(/\\/g,"\\\\").replace(/(\.|\[|\])/g,"\\$1")},deepMapValues:function(n,t,u){var a=r(u);return!e.isObject(n)||e.isDate(n)||e.isRegExp(n)?t(n,a):e.extend({},n,e.mapValues(n,function(n,r){return e.deepMapValues(n,t,e.flatten([a,r]))}))}};return t.deepSetValue=t.deepSet,t.deepGetValue=t.deepGet,t.deepGetOwnValue=t.deepOwn,e.mixin(t),t});